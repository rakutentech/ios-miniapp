---
layout: userguide
---

# Mini App JS SDK

The Mini App SDK for JavaScript can be used to access Android/iOS device and App specific features from a Mini App. It is intended to be used in conjunction with the [Android Mini App SDK](https://github.com/rakutentech/android-miniapp) and [iOS Mini App SDK](https://github.com/rakutentech/ios-miniapp).

## Getting Started

### 1. Setup the SDK

This SDK can be used either as an NPM module or via the bundled script file.

#### Usage as NPM module

The SDK package can be installed in your project from the NPM registry:

```
npm install js-miniapp-sdk
```

And then it can be used as an import in your project:

```javascript
import miniApp from "js-miniapp-sdk";

miniApp.getUniqueId()
    .then(id => {
    // ...
```

#### Usage via bundled script
You can alternatively use the bundled script file to use the SDK. When using the bundled script file, a global `MiniApp` object will be available for using the SDK. 

First, download the bundled script file from the [releases page](https://github.com/rakutentech/js-miniapp/releases). You can then include it as a normal `<script>` tag in your HTML:

```html
<script src="miniapp.bundle.js"></script>
```

Then you can acces the SDK methods via `window.MiniApp`.

```javascript
window.MiniApp.getUniqueId()
    .then(id => {
    // ...
```

### 2. Retrieve a unique ID

You can retrieve a unique ID which was generated by the Android or iOS App to represent the user of the mini app:

```javascript
miniApp.getUniqueId()
	.then(id => {
		console.log(id);
	}).catch(error => {
		console.error(error);
	});
```

### 3. Request Permissions

There must be permission requests from miniapp to access some mobile components and data. Users can revoke a permission at any time, so you must always request the permission every time before you use the associated API.

| Permission | Method | Description |
| --- | --- | --- |
| LOCATION | `requestLocationPermission()` | The current location of the device.<br>Data position can be accessible via geolocation request (`navigator.geolocation`). |

#### Usage example

Simply call available permission request methods from `miniApp`.

```javascript
miniApp.requestLocationPermission()
	.then(success => {
		console.log(success); // Allowed.
	}).catch(error => {
		console.error(error); // Permission is not granted due to many circumstances.
	});
```

### 4. Show Interstitial Ad

Mini App JS SDK makes it possible to display Interstitial ads during the execution of a mini-app. MiniApp#showInterstitialAd facilitates the display of the Ad while pairing with the Mini App Native SDKs. The results of the display action are captured as [InterstitialAdResponse](src/types/responseTypes/interstitial/index.ts).
Note: This requires the mini-app to have obtained/enrolled the required ad units with the host app.

There is an adType key in the response type which is a value from AdTypes enum and the value for this response is set to `AdTypes.INTERSTITIAL`

```javascript
miniApp.showInterstitialAd()
	.then(response => {
		console.log(response); // Successful response
	}).catch(error => {
		console.error(response); // Error
	});
```

## Advanced Usage

### Usage when testing in the browser
Currently, the SDK does not support testing in the browser. You must test using the [Android Mini App Demo App](https://github.com/rakutentech/android-miniapp) or [iOS Mini App Demo App](https://github.com/rakutentech/ios-miniapp) on an actual Android or iOS device.

If you wish to be able to test in a browser, you can detect whether your web app is running on an Android/iOS device or in the browser. If not running on a device, you can return a mock value instead of calling the SDK method. Device detection can be done using something like [Bowser](https://github.com/lancedikson/bowser).

```javascript
import miniApp from "js-miniapp-sdk";
import Bowser from "bowser"; 

const browser = Bowser.parse(window.navigator.userAgent);

function getId() {
    if (browser.is("android") || browser.is("ios")) {
        return miniApp.getUniqueId()
            .then(id => {
                console.log(id);
            }).catch(error => {
                console.error(error);
            });
    } else {
        return Promise.resolve("mock_unique_id_value");
    }
}
```

## Changelog

See the full [CHANGELOG](https://github.com/rakutentech/js-miniapp/blob/master/js-miniapp-sdk/CHANGELOG.md).
