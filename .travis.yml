language: swift
xcode_workspace: MiniApp.xcworkspace
xcode_scheme: Tests
osx_image: xcode11.2

before_install:
- bundle install
- gem update fastlane cocoapods --no-document
- pod repo update

script:
- fastlane ci
- bundle exec danger

after_success:
- jazzy
  --xcodebuild-arguments -scheme,Tests
  --module MiniApp
  --source-directory MiniApp
  --podspec MiniApp.podspec
  --readme README.md

deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN
  keep_history: true
  local_dir: docs
  on:
    branch: master

notifications:
  slack:
    rooms:
      secure: yx82MU+0Q/+JrqHTTa01MN+nhkrLELq7tzHDzbhgrI2z2XxRYXX1asaz/5EGFAZOoOBR3DzqHJTvWOC2I5rjZDHBfht0ecSir1Ml8ThHAjzavjI/kJpP0SeHRgUNcz9KVmlX5dKAYBezbSoXs9sIEReigLpajt3skT10tmGMkMOUwJCcxS29NfuVE8x3bOKKKG9XrygM8chA7OV6nYm2tF42OkiJyBghYI36/fpAlpK09sRzybuFFAeRJIWEzD0vQnZp3gw9D590iZzcvFThgtsWsyzE1RiVYnnjYopHeoP9cTwHo1qbsTsWvdecBsrBK3DIwnGGEsy4ehArfMyqf36jxNpbNXdsanknBHtdq4O7+Bn2lCgZEfwh/RUhmCFtRxV07V4YmuKPYyFEwqx7WFp6nVerkV3sns6ZPW70MEC93DyFHJ09APHPnLLFyIvlo9WhE8mUO2NKCx15EXplFt0Svd2cuw1VlwC4aWpiy0jhTNnx0ci+mVn/Nw07jZQiI5aphqA4wRoij5HtHfXVRAMmAm0h1qtfGkwziVEvw3ju8Zf0AFckK6BC+yt2MNFddFXB0V/ZjuSW43XEirALFEZdCbInY+JYFjPBlM0J7l0BnDkFHypEjvUAexvWk58WO8wXQXyNaF3VI9gdLxXRKo5DhF/l20RRuyP/a3hqkDc=
